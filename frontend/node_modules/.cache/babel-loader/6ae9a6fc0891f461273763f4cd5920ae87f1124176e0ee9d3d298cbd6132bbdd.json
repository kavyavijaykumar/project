{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\hp\\\\Downloads\\\\without_encryption\\\\without_encryption\\\\frontend\\\\src\\\\components\\\\Dashboard\\\\LiveCamera.js\",\n  _s = $RefreshSig$();\nimport React, { useRef, useState, useEffect } from \"react\";\nimport { api } from \"../../api\";\nimport \"./LiveCamera.css\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction LiveCamera() {\n  _s();\n  const canvasRef = useRef(null);\n  const [active, setActive] = useState(false);\n  const [detecting, setDetecting] = useState(false);\n  const [detectedLabels, setDetectedLabels] = useState([]);\n  const [fps, setFps] = useState(0);\n  const [ipAddress, setIpAddress] = useState(\"\");\n  const [connectionStatus, setConnectionStatus] = useState(\"\");\n  const [diagnostics, setDiagnostics] = useState(null);\n  const intervalRef = useRef(null);\n  const fpsCounterRef = useRef({\n    frames: 0,\n    lastTime: Date.now()\n  });\n  const [isLoading, setIsLoading] = useState(false);\n  const [errorCount, setErrorCount] = useState(0);\n\n  // Test IP Webcam connection with diagnostics\n  const testConnection = async () => {\n    if (!ipAddress.trim()) {\n      alert(\"‚ö†Ô∏è Please enter your IP Webcam address!\");\n      return;\n    }\n    try {\n      setConnectionStatus(\"Testing connection...\");\n      setIsLoading(true);\n      setDiagnostics(null);\n      console.log(\"üîç Testing connection to:\", ipAddress.trim());\n      const response = await api.get(`/ipwebcam/test?ip=${ipAddress.trim()}`);\n      console.log(\"üìä Test results:\", response.data);\n      setDiagnostics(response.data);\n      if (response.data.status === \"success\") {\n        setConnectionStatus(\"Connected ‚úÖ\");\n        return true;\n      } else {\n        setConnectionStatus(`Connection failed ‚ùå`);\n\n        // Show detailed error info\n        const errorDetails = response.data.tests.filter(t => t.error).map(t => `${t.endpoint}: ${t.error}`).join('\\n');\n        alert(\"‚ùå Unable to connect to IP Webcam!\\n\\n\" + \"Diagnostic Results:\\n\" + errorDetails + \"\\n\\n\" + \"Troubleshooting Steps:\\n\" + \"1. Make sure IP Webcam app is running on your phone\\n\" + \"2. Check IP address is correct: \" + ipAddress + \"\\n\" + \"3. Both devices must be on the SAME WiFi network\\n\" + \"4. Try opening in phone browser: http://\" + ipAddress + \":8080\\n\" + \"5. Disable any VPN or firewall on your phone\\n\" + \"6. Try restarting the IP Webcam app\");\n        return false;\n      }\n    } catch (err) {\n      console.error(\"‚ùå Connection test error:\", err);\n      setConnectionStatus(\"Test failed ‚ùå\");\n      let errorMsg = \"Unknown error\";\n      if (err.response) {\n        var _err$response$data;\n        errorMsg = ((_err$response$data = err.response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.detail) || err.response.statusText;\n      } else if (err.request) {\n        errorMsg = \"Cannot reach backend server - is it running?\";\n      } else {\n        errorMsg = err.message;\n      }\n      alert(\"‚ùå Connection test failed!\\n\\n\" + \"Error: \" + errorMsg + \"\\n\\n\" + \"Please check:\\n\" + \"1. Backend server is running on port 8000\\n\" + \"2. IP Webcam app is running on phone\\n\" + \"3. Phone and laptop are on same WiFi\\n\" + \"4. IP address format: 192.168.x.x (no http:// or :8080)\");\n      return false;\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  // Start IP Webcam\n  const startCamera = async () => {\n    const connected = await testConnection();\n    if (connected) {\n      setActive(true);\n      setErrorCount(0);\n      console.log(\"‚úÖ Camera connected, ready to start detection\");\n    }\n  };\n\n  // Stop camera\n  const stopCamera = () => {\n    setActive(false);\n    setConnectionStatus(\"\");\n    setDiagnostics(null);\n    stopDetection();\n    console.log(\"üõë Camera stopped\");\n  };\n\n  // Start detection\n  const startDetection = () => {\n    if (!active && !ipAddress.trim()) {\n      alert(\"‚ö†Ô∏è Camera not started yet!\");\n      return;\n    }\n    setDetecting(true);\n    setErrorCount(0);\n    console.log(\"‚ñ∂Ô∏è Starting detection loop...\");\n\n    // Start detection loop\n    intervalRef.current = setInterval(() => {\n      fetchAndDetectFrame();\n    }, 1000); // Fetch frame every 1 second\n  };\n\n  // Stop detection\n  const stopDetection = () => {\n    setDetecting(false);\n    if (intervalRef.current) {\n      clearInterval(intervalRef.current);\n      intervalRef.current = null;\n    }\n    setDetectedLabels([]);\n    setFps(0);\n    setErrorCount(0);\n\n    // Clear canvas\n    if (canvasRef.current) {\n      const ctx = canvasRef.current.getContext(\"2d\");\n      ctx.clearRect(0, 0, canvasRef.current.width, canvasRef.current.height);\n    }\n    console.log(\"‚è∏Ô∏è Detection stopped\");\n  };\n\n  // Fetch frame from IP Webcam via backend and detect\n  const fetchAndDetectFrame = async () => {\n    if (!canvasRef.current || !ipAddress.trim()) return;\n    try {\n      console.log(\"üì∏ Fetching frame from IP:\", ipAddress.trim());\n\n      // Step 1: Fetch frame through backend proxy\n      const frameUrl = `/ipwebcam/frame?ip=${ipAddress.trim()}`;\n      const frameResponse = await api.get(frameUrl, {\n        responseType: 'blob',\n        timeout: 10000 // 10 second timeout\n      });\n      console.log(\"‚úÖ Frame fetched, size:\", frameResponse.data.size, \"bytes\");\n\n      // Reset error count on successful fetch\n      setErrorCount(0);\n\n      // Step 2: Convert blob to file for upload\n      const file = new File([frameResponse.data], \"frame.jpg\", {\n        type: \"image/jpeg\"\n      });\n\n      // Step 3: Send to detection endpoint\n      const formData = new FormData();\n      formData.append(\"file\", file);\n      console.log(\"üîç Sending frame for detection...\");\n      const response = await api.post(\"/upload\", formData, {\n        headers: {\n          \"Content-Type\": \"multipart/form-data\"\n        },\n        params: {\n          save_history: false\n        },\n        timeout: 15000 // 15 second timeout\n      });\n      console.log(\"‚úÖ Detection complete, labels:\", response.data.labels);\n\n      // Update detected labels\n      if (response.data.labels && response.data.labels.length > 0) {\n        setDetectedLabels(response.data.labels);\n      } else {\n        setDetectedLabels([]);\n      }\n\n      // Draw detection results on canvas\n      if (response.data.image && canvasRef.current) {\n        const canvas = canvasRef.current;\n        const context = canvas.getContext(\"2d\");\n        const img = new Image();\n        img.onload = () => {\n          // Set canvas size to match image\n          canvas.width = img.width;\n          canvas.height = img.height;\n\n          // Draw the image with bounding boxes\n          context.clearRect(0, 0, canvas.width, canvas.height);\n          context.drawImage(img, 0, 0, canvas.width, canvas.height);\n\n          // Update FPS counter\n          updateFPS();\n        };\n        img.onerror = e => {\n          console.error(\"‚ùå Failed to load detection image\", e);\n        };\n        img.src = `data:image/jpeg;base64,${response.data.image}`;\n      }\n    } catch (error) {\n      var _error$response, _error$response2;\n      console.error(\"‚ùå Frame fetch/detection error:\", error);\n      setErrorCount(prev => prev + 1);\n\n      // Show specific error messages\n      if (error.code === 'ECONNABORTED' || error.message.includes('timeout')) {\n        console.warn(\"‚è±Ô∏è Request timeout - this is normal occasionally\");\n      } else if (((_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.status) === 502) {\n        console.error(\"üîå Lost connection to IP Webcam\");\n        setConnectionStatus(\"Connection lost ‚ö†Ô∏è\");\n      } else if (((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : _error$response2.status) === 401) {\n        console.error(\"üîê Authentication error\");\n        alert(\"Session expired. Please login again.\");\n        stopDetection();\n        return;\n      }\n\n      // Stop detection after multiple consecutive errors\n      if (errorCount >= 5) {\n        console.error(\"‚ùå Too many errors, stopping detection\");\n        alert(\"Lost connection to IP Webcam. Please check your connection and try again.\");\n        stopDetection();\n      }\n    }\n  };\n\n  // Update FPS counter\n  const updateFPS = () => {\n    fpsCounterRef.current.frames++;\n    const now = Date.now();\n    const elapsed = now - fpsCounterRef.current.lastTime;\n    if (elapsed >= 1000) {\n      setFps(fpsCounterRef.current.frames);\n      fpsCounterRef.current.frames = 0;\n      fpsCounterRef.current.lastTime = now;\n    }\n  };\n\n  // Cleanup on unmount\n  useEffect(() => {\n    return () => {\n      stopCamera();\n    };\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"live-camera-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"\\uD83C\\uDFA5 Live Camera Detection (IP Webcam)\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 263,\n      columnNumber: 7\n    }, this), !active && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"ip-webcam-setup\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"ip-input-section\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"ip-input\",\n          children: \"\\uD83D\\uDCE1 Enter IP Webcam Address:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 270,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          id: \"ip-input\",\n          type: \"text\",\n          className: \"ip-input\",\n          placeholder: \"Example: 192.168.1.100\",\n          value: ipAddress,\n          onChange: e => setIpAddress(e.target.value),\n          onKeyPress: e => {\n            if (e.key === 'Enter' && !isLoading) {\n              startCamera();\n            }\n          },\n          disabled: isLoading\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 271,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 269,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 267,\n      columnNumber: 9\n    }, this), connectionStatus && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `connection-status ${connectionStatus.includes('‚úÖ') ? 'success' : connectionStatus.includes('‚ùå') ? 'error' : 'warning'}`,\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        children: connectionStatus\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 297,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 292,\n      columnNumber: 9\n    }, this), diagnostics && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"diagnostics-panel\",\n      children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n        children: \"\\uD83D\\uDD27 Connection Diagnostics:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 304,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"diagnostics-content\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"IP Address:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 306,\n            columnNumber: 16\n          }, this), \" \", diagnostics.ip, \":8080\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 306,\n          columnNumber: 13\n        }, this), diagnostics.tests && diagnostics.tests.map((test, idx) => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `diagnostic-item ${test.success ? 'success' : 'error'}`,\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: [test.endpoint, \":\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 309,\n            columnNumber: 17\n          }, this), \" \", test.success ? `‚úÖ Success (${test.size} bytes)` : `‚ùå ${test.error || 'Failed'}`]\n        }, idx, true, {\n          fileName: _jsxFileName,\n          lineNumber: 308,\n          columnNumber: 15\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 305,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 303,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"camera-display\",\n      children: active ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"video-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"canvas\", {\n          ref: canvasRef,\n          className: \"detection-canvas\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 325,\n          columnNumber: 13\n        }, this), !detecting && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"canvas-overlay\",\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"\\u2705 Connected! Click \\\"Start Detection\\\" to begin\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 331,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 330,\n          columnNumber: 15\n        }, this), detecting && errorCount > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"error-indicator\",\n          children: [\"\\u26A0\\uFE0F Connection issues (\", errorCount, \" errors)\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 335,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 323,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"camera-placeholder\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"placeholder-icon\",\n          children: \"\\uD83D\\uDCF9\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 342,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Enter IP address above and click \\\"Start Camera\\\"\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 343,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n          children: \"Make sure IP Webcam app is running on your phone\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 344,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 341,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 321,\n      columnNumber: 7\n    }, this), active && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"detection-stats\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"stat-item\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"stat-label\",\n          children: \"Status:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 353,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: `stat-value ${detecting ? \"active\" : \"\"}`,\n          children: detecting ? \"üü¢ Detecting\" : \"üî¥ Paused\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 354,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 352,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"stat-item\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"stat-label\",\n          children: \"FPS:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 359,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"stat-value\",\n          children: fps\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 360,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 358,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"stat-item\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"stat-label\",\n          children: \"Objects Found:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 363,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"stat-value\",\n          children: detectedLabels.length\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 364,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 362,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 351,\n      columnNumber: 9\n    }, this), detectedLabels.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"detected-objects\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"\\uD83C\\uDFAF Detected Objects:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 372,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"labels-container\",\n        children: [...new Set(detectedLabels)].map((label, index) => /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"label-badge\",\n          children: label\n        }, index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 375,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 373,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 371,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"controls\",\n      children: !active ? /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn btn-primary\",\n        onClick: startCamera,\n        disabled: isLoading,\n        children: isLoading ? \"‚è≥ Testing Connection...\" : \"üìπ Start Camera\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 386,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [!detecting ? /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-success\",\n          onClick: startDetection,\n          children: \"\\u25B6\\uFE0F Start Detection\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 396,\n          columnNumber: 15\n        }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-warning\",\n          onClick: stopDetection,\n          children: \"\\u23F8\\uFE0F Pause Detection\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 400,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-danger\",\n          onClick: stopCamera,\n          children: \"\\u23F9\\uFE0F Stop Camera\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 404,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 384,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 262,\n    columnNumber: 5\n  }, this);\n}\n_s(LiveCamera, \"tJVY+gK1Wp6pBqNyKSxA5w52H3g=\");\n_c = LiveCamera;\nexport default LiveCamera;\nvar _c;\n$RefreshReg$(_c, \"LiveCamera\");","map":{"version":3,"names":["React","useRef","useState","useEffect","api","jsxDEV","_jsxDEV","Fragment","_Fragment","LiveCamera","_s","canvasRef","active","setActive","detecting","setDetecting","detectedLabels","setDetectedLabels","fps","setFps","ipAddress","setIpAddress","connectionStatus","setConnectionStatus","diagnostics","setDiagnostics","intervalRef","fpsCounterRef","frames","lastTime","Date","now","isLoading","setIsLoading","errorCount","setErrorCount","testConnection","trim","alert","console","log","response","get","data","status","errorDetails","tests","filter","t","error","map","endpoint","join","err","errorMsg","_err$response$data","detail","statusText","request","message","startCamera","connected","stopCamera","stopDetection","startDetection","current","setInterval","fetchAndDetectFrame","clearInterval","ctx","getContext","clearRect","width","height","frameUrl","frameResponse","responseType","timeout","size","file","File","type","formData","FormData","append","post","headers","params","save_history","labels","length","image","canvas","context","img","Image","onload","drawImage","updateFPS","onerror","e","src","_error$response","_error$response2","prev","code","includes","warn","elapsed","className","children","fileName","_jsxFileName","lineNumber","columnNumber","htmlFor","id","placeholder","value","onChange","target","onKeyPress","key","disabled","ip","test","idx","success","ref","Set","label","index","onClick","_c","$RefreshReg$"],"sources":["C:/Users/hp/Downloads/without_encryption/without_encryption/frontend/src/components/Dashboard/LiveCamera.js"],"sourcesContent":["import React, { useRef, useState, useEffect } from \"react\";\r\nimport { api } from \"../../api\";\r\nimport \"./LiveCamera.css\";\r\n\r\nfunction LiveCamera() {\r\n  const canvasRef = useRef(null);\r\n  const [active, setActive] = useState(false);\r\n  const [detecting, setDetecting] = useState(false);\r\n  const [detectedLabels, setDetectedLabels] = useState([]);\r\n  const [fps, setFps] = useState(0);\r\n  const [ipAddress, setIpAddress] = useState(\"\");\r\n  const [connectionStatus, setConnectionStatus] = useState(\"\");\r\n  const [diagnostics, setDiagnostics] = useState(null);\r\n  const intervalRef = useRef(null);\r\n  const fpsCounterRef = useRef({ frames: 0, lastTime: Date.now() });\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [errorCount, setErrorCount] = useState(0);\r\n\r\n  // Test IP Webcam connection with diagnostics\r\n  const testConnection = async () => {\r\n    if (!ipAddress.trim()) {\r\n      alert(\"‚ö†Ô∏è Please enter your IP Webcam address!\");\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setConnectionStatus(\"Testing connection...\");\r\n      setIsLoading(true);\r\n      setDiagnostics(null);\r\n\r\n      console.log(\"üîç Testing connection to:\", ipAddress.trim());\r\n\r\n      const response = await api.get(`/ipwebcam/test?ip=${ipAddress.trim()}`);\r\n      \r\n      console.log(\"üìä Test results:\", response.data);\r\n      setDiagnostics(response.data);\r\n      \r\n      if (response.data.status === \"success\") {\r\n        setConnectionStatus(\"Connected ‚úÖ\");\r\n        return true;\r\n      } else {\r\n        setConnectionStatus(`Connection failed ‚ùå`);\r\n        \r\n        // Show detailed error info\r\n        const errorDetails = response.data.tests\r\n          .filter(t => t.error)\r\n          .map(t => `${t.endpoint}: ${t.error}`)\r\n          .join('\\n');\r\n        \r\n        alert(\r\n          \"‚ùå Unable to connect to IP Webcam!\\n\\n\" +\r\n          \"Diagnostic Results:\\n\" +\r\n          errorDetails + \"\\n\\n\" +\r\n          \"Troubleshooting Steps:\\n\" +\r\n          \"1. Make sure IP Webcam app is running on your phone\\n\" +\r\n          \"2. Check IP address is correct: \" + ipAddress + \"\\n\" +\r\n          \"3. Both devices must be on the SAME WiFi network\\n\" +\r\n          \"4. Try opening in phone browser: http://\" + ipAddress + \":8080\\n\" +\r\n          \"5. Disable any VPN or firewall on your phone\\n\" +\r\n          \"6. Try restarting the IP Webcam app\"\r\n        );\r\n        return false;\r\n      }\r\n    } catch (err) {\r\n      console.error(\"‚ùå Connection test error:\", err);\r\n      setConnectionStatus(\"Test failed ‚ùå\");\r\n      \r\n      let errorMsg = \"Unknown error\";\r\n      if (err.response) {\r\n        errorMsg = err.response.data?.detail || err.response.statusText;\r\n      } else if (err.request) {\r\n        errorMsg = \"Cannot reach backend server - is it running?\";\r\n      } else {\r\n        errorMsg = err.message;\r\n      }\r\n      \r\n      alert(\r\n        \"‚ùå Connection test failed!\\n\\n\" +\r\n        \"Error: \" + errorMsg + \"\\n\\n\" +\r\n        \"Please check:\\n\" +\r\n        \"1. Backend server is running on port 8000\\n\" +\r\n        \"2. IP Webcam app is running on phone\\n\" +\r\n        \"3. Phone and laptop are on same WiFi\\n\" +\r\n        \"4. IP address format: 192.168.x.x (no http:// or :8080)\"\r\n      );\r\n      return false;\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  // Start IP Webcam\r\n  const startCamera = async () => {\r\n    const connected = await testConnection();\r\n    if (connected) {\r\n      setActive(true);\r\n      setErrorCount(0);\r\n      console.log(\"‚úÖ Camera connected, ready to start detection\");\r\n    }\r\n  };\r\n\r\n  // Stop camera\r\n  const stopCamera = () => {\r\n    setActive(false);\r\n    setConnectionStatus(\"\");\r\n    setDiagnostics(null);\r\n    stopDetection();\r\n    console.log(\"üõë Camera stopped\");\r\n  };\r\n\r\n  // Start detection\r\n  const startDetection = () => {\r\n    if (!active && !ipAddress.trim()) {\r\n      alert(\"‚ö†Ô∏è Camera not started yet!\");\r\n      return;\r\n    }\r\n    \r\n    setDetecting(true);\r\n    setErrorCount(0);\r\n    console.log(\"‚ñ∂Ô∏è Starting detection loop...\");\r\n    \r\n    // Start detection loop\r\n    intervalRef.current = setInterval(() => {\r\n      fetchAndDetectFrame();\r\n    }, 1000); // Fetch frame every 1 second\r\n  };\r\n\r\n  // Stop detection\r\n  const stopDetection = () => {\r\n    setDetecting(false);\r\n    if (intervalRef.current) {\r\n      clearInterval(intervalRef.current);\r\n      intervalRef.current = null;\r\n    }\r\n    setDetectedLabels([]);\r\n    setFps(0);\r\n    setErrorCount(0);\r\n    \r\n    // Clear canvas\r\n    if (canvasRef.current) {\r\n      const ctx = canvasRef.current.getContext(\"2d\");\r\n      ctx.clearRect(0, 0, canvasRef.current.width, canvasRef.current.height);\r\n    }\r\n    console.log(\"‚è∏Ô∏è Detection stopped\");\r\n  };\r\n\r\n  // Fetch frame from IP Webcam via backend and detect\r\n  const fetchAndDetectFrame = async () => {\r\n    if (!canvasRef.current || !ipAddress.trim()) return;\r\n\r\n    try {\r\n      console.log(\"üì∏ Fetching frame from IP:\", ipAddress.trim());\r\n\r\n      // Step 1: Fetch frame through backend proxy\r\n      const frameUrl = `/ipwebcam/frame?ip=${ipAddress.trim()}`;\r\n      const frameResponse = await api.get(frameUrl, {\r\n        responseType: 'blob',\r\n        timeout: 10000 // 10 second timeout\r\n      });\r\n\r\n      console.log(\"‚úÖ Frame fetched, size:\", frameResponse.data.size, \"bytes\");\r\n\r\n      // Reset error count on successful fetch\r\n      setErrorCount(0);\r\n\r\n      // Step 2: Convert blob to file for upload\r\n      const file = new File([frameResponse.data], \"frame.jpg\", { type: \"image/jpeg\" });\r\n      \r\n      // Step 3: Send to detection endpoint\r\n      const formData = new FormData();\r\n      formData.append(\"file\", file);\r\n\r\n      console.log(\"üîç Sending frame for detection...\");\r\n\r\n      const response = await api.post(\"/upload\", formData, {\r\n        headers: { \"Content-Type\": \"multipart/form-data\" },\r\n        params: { save_history: false },\r\n        timeout: 15000 // 15 second timeout\r\n      });\r\n\r\n      console.log(\"‚úÖ Detection complete, labels:\", response.data.labels);\r\n\r\n      // Update detected labels\r\n      if (response.data.labels && response.data.labels.length > 0) {\r\n        setDetectedLabels(response.data.labels);\r\n      } else {\r\n        setDetectedLabels([]);\r\n      }\r\n\r\n      // Draw detection results on canvas\r\n      if (response.data.image && canvasRef.current) {\r\n        const canvas = canvasRef.current;\r\n        const context = canvas.getContext(\"2d\");\r\n        \r\n        const img = new Image();\r\n        img.onload = () => {\r\n          // Set canvas size to match image\r\n          canvas.width = img.width;\r\n          canvas.height = img.height;\r\n          \r\n          // Draw the image with bounding boxes\r\n          context.clearRect(0, 0, canvas.width, canvas.height);\r\n          context.drawImage(img, 0, 0, canvas.width, canvas.height);\r\n          \r\n          // Update FPS counter\r\n          updateFPS();\r\n        };\r\n        img.onerror = (e) => {\r\n          console.error(\"‚ùå Failed to load detection image\", e);\r\n        };\r\n        img.src = `data:image/jpeg;base64,${response.data.image}`;\r\n      }\r\n\r\n    } catch (error) {\r\n      console.error(\"‚ùå Frame fetch/detection error:\", error);\r\n      \r\n      setErrorCount(prev => prev + 1);\r\n\r\n      // Show specific error messages\r\n      if (error.code === 'ECONNABORTED' || error.message.includes('timeout')) {\r\n        console.warn(\"‚è±Ô∏è Request timeout - this is normal occasionally\");\r\n      } else if (error.response?.status === 502) {\r\n        console.error(\"üîå Lost connection to IP Webcam\");\r\n        setConnectionStatus(\"Connection lost ‚ö†Ô∏è\");\r\n      } else if (error.response?.status === 401) {\r\n        console.error(\"üîê Authentication error\");\r\n        alert(\"Session expired. Please login again.\");\r\n        stopDetection();\r\n        return;\r\n      }\r\n\r\n      // Stop detection after multiple consecutive errors\r\n      if (errorCount >= 5) {\r\n        console.error(\"‚ùå Too many errors, stopping detection\");\r\n        alert(\"Lost connection to IP Webcam. Please check your connection and try again.\");\r\n        stopDetection();\r\n      }\r\n    }\r\n  };\r\n\r\n  // Update FPS counter\r\n  const updateFPS = () => {\r\n    fpsCounterRef.current.frames++;\r\n    const now = Date.now();\r\n    const elapsed = now - fpsCounterRef.current.lastTime;\r\n\r\n    if (elapsed >= 1000) {\r\n      setFps(fpsCounterRef.current.frames);\r\n      fpsCounterRef.current.frames = 0;\r\n      fpsCounterRef.current.lastTime = now;\r\n    }\r\n  };\r\n\r\n  // Cleanup on unmount\r\n  useEffect(() => {\r\n    return () => {\r\n      stopCamera();\r\n    };\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"live-camera-container\">\r\n      <h2>üé• Live Camera Detection (IP Webcam)</h2>\r\n\r\n      {/* IP Address Input */}\r\n      {!active && (\r\n        <div className=\"ip-webcam-setup\">\r\n        \r\n          <div className=\"ip-input-section\">\r\n            <label htmlFor=\"ip-input\">üì° Enter IP Webcam Address:</label>\r\n            <input\r\n              id=\"ip-input\"\r\n              type=\"text\"\r\n              className=\"ip-input\"\r\n              placeholder=\"Example: 192.168.1.100\"\r\n              value={ipAddress}\r\n              onChange={(e) => setIpAddress(e.target.value)}\r\n              onKeyPress={(e) => {\r\n                if (e.key === 'Enter' && !isLoading) {\r\n                  startCamera();\r\n                }\r\n              }}\r\n              disabled={isLoading}\r\n            />\r\n        \r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Connection Status */}\r\n      {connectionStatus && (\r\n        <div className={`connection-status ${\r\n          connectionStatus.includes('‚úÖ') ? 'success' : \r\n          connectionStatus.includes('‚ùå') ? 'error' : \r\n          'warning'\r\n        }`}>\r\n          <p>{connectionStatus}</p>\r\n        </div>\r\n      )}\r\n\r\n      {/* Diagnostics Display */}\r\n      {diagnostics && (\r\n        <div className=\"diagnostics-panel\">\r\n          <h4>üîß Connection Diagnostics:</h4>\r\n          <div className=\"diagnostics-content\">\r\n            <p><strong>IP Address:</strong> {diagnostics.ip}:8080</p>\r\n            {diagnostics.tests && diagnostics.tests.map((test, idx) => (\r\n              <div key={idx} className={`diagnostic-item ${test.success ? 'success' : 'error'}`}>\r\n                <strong>{test.endpoint}:</strong> {\r\n                  test.success \r\n                    ? `‚úÖ Success (${test.size} bytes)` \r\n                    : `‚ùå ${test.error || 'Failed'}`\r\n                }\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Camera Display */}\r\n      <div className=\"camera-display\">\r\n        {active ? (\r\n          <div className=\"video-container\">\r\n            {/* Canvas to display detection results */}\r\n            <canvas\r\n              ref={canvasRef}\r\n              className=\"detection-canvas\"\r\n            />\r\n            {!detecting && (\r\n              <div className=\"canvas-overlay\">\r\n                <p>‚úÖ Connected! Click \"Start Detection\" to begin</p>\r\n              </div>\r\n            )}\r\n            {detecting && errorCount > 0 && (\r\n              <div className=\"error-indicator\">\r\n                ‚ö†Ô∏è Connection issues ({errorCount} errors)\r\n              </div>\r\n            )}\r\n          </div>\r\n        ) : (\r\n          <div className=\"camera-placeholder\">\r\n            <div className=\"placeholder-icon\">üìπ</div>\r\n            <p>Enter IP address above and click \"Start Camera\"</p>\r\n            <small>Make sure IP Webcam app is running on your phone</small>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Detection Stats */}\r\n      {active && (\r\n        <div className=\"detection-stats\">\r\n          <div className=\"stat-item\">\r\n            <span className=\"stat-label\">Status:</span>\r\n            <span className={`stat-value ${detecting ? \"active\" : \"\"}`}>\r\n              {detecting ? \"üü¢ Detecting\" : \"üî¥ Paused\"}\r\n            </span>\r\n          </div>\r\n          <div className=\"stat-item\">\r\n            <span className=\"stat-label\">FPS:</span>\r\n            <span className=\"stat-value\">{fps}</span>\r\n          </div>\r\n          <div className=\"stat-item\">\r\n            <span className=\"stat-label\">Objects Found:</span>\r\n            <span className=\"stat-value\">{detectedLabels.length}</span>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Detected Objects */}\r\n      {detectedLabels.length > 0 && (\r\n        <div className=\"detected-objects\">\r\n          <h3>üéØ Detected Objects:</h3>\r\n          <div className=\"labels-container\">\r\n            {[...new Set(detectedLabels)].map((label, index) => (\r\n              <span key={index} className=\"label-badge\">\r\n                {label}\r\n              </span>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Control Buttons */}\r\n      <div className=\"controls\">\r\n        {!active ? (\r\n          <button \r\n            className=\"btn btn-primary\" \r\n            onClick={startCamera}\r\n            disabled={isLoading}\r\n          >\r\n            {isLoading ? \"‚è≥ Testing Connection...\" : \"üìπ Start Camera\"}\r\n          </button>\r\n        ) : (\r\n          <>\r\n            {!detecting ? (\r\n              <button className=\"btn btn-success\" onClick={startDetection}>\r\n                ‚ñ∂Ô∏è Start Detection\r\n              </button>\r\n            ) : (\r\n              <button className=\"btn btn-warning\" onClick={stopDetection}>\r\n                ‚è∏Ô∏è Pause Detection\r\n              </button>\r\n            )}\r\n            <button className=\"btn btn-danger\" onClick={stopCamera}>\r\n              ‚èπÔ∏è Stop Camera\r\n            </button>\r\n          </>\r\n        )}\r\n      </div>\r\n\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default LiveCamera;"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,MAAM,EAAEC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAC1D,SAASC,GAAG,QAAQ,WAAW;AAC/B,OAAO,kBAAkB;AAAC,SAAAC,MAAA,IAAAC,OAAA,EAAAC,QAAA,IAAAC,SAAA;AAE1B,SAASC,UAAUA,CAAA,EAAG;EAAAC,EAAA;EACpB,MAAMC,SAAS,GAAGV,MAAM,CAAC,IAAI,CAAC;EAC9B,MAAM,CAACW,MAAM,EAAEC,SAAS,CAAC,GAAGX,QAAQ,CAAC,KAAK,CAAC;EAC3C,MAAM,CAACY,SAAS,EAAEC,YAAY,CAAC,GAAGb,QAAQ,CAAC,KAAK,CAAC;EACjD,MAAM,CAACc,cAAc,EAAEC,iBAAiB,CAAC,GAAGf,QAAQ,CAAC,EAAE,CAAC;EACxD,MAAM,CAACgB,GAAG,EAAEC,MAAM,CAAC,GAAGjB,QAAQ,CAAC,CAAC,CAAC;EACjC,MAAM,CAACkB,SAAS,EAAEC,YAAY,CAAC,GAAGnB,QAAQ,CAAC,EAAE,CAAC;EAC9C,MAAM,CAACoB,gBAAgB,EAAEC,mBAAmB,CAAC,GAAGrB,QAAQ,CAAC,EAAE,CAAC;EAC5D,MAAM,CAACsB,WAAW,EAAEC,cAAc,CAAC,GAAGvB,QAAQ,CAAC,IAAI,CAAC;EACpD,MAAMwB,WAAW,GAAGzB,MAAM,CAAC,IAAI,CAAC;EAChC,MAAM0B,aAAa,GAAG1B,MAAM,CAAC;IAAE2B,MAAM,EAAE,CAAC;IAAEC,QAAQ,EAAEC,IAAI,CAACC,GAAG,CAAC;EAAE,CAAC,CAAC;EACjE,MAAM,CAACC,SAAS,EAAEC,YAAY,CAAC,GAAG/B,QAAQ,CAAC,KAAK,CAAC;EACjD,MAAM,CAACgC,UAAU,EAAEC,aAAa,CAAC,GAAGjC,QAAQ,CAAC,CAAC,CAAC;;EAE/C;EACA,MAAMkC,cAAc,GAAG,MAAAA,CAAA,KAAY;IACjC,IAAI,CAAChB,SAAS,CAACiB,IAAI,CAAC,CAAC,EAAE;MACrBC,KAAK,CAAC,yCAAyC,CAAC;MAChD;IACF;IAEA,IAAI;MACFf,mBAAmB,CAAC,uBAAuB,CAAC;MAC5CU,YAAY,CAAC,IAAI,CAAC;MAClBR,cAAc,CAAC,IAAI,CAAC;MAEpBc,OAAO,CAACC,GAAG,CAAC,2BAA2B,EAAEpB,SAAS,CAACiB,IAAI,CAAC,CAAC,CAAC;MAE1D,MAAMI,QAAQ,GAAG,MAAMrC,GAAG,CAACsC,GAAG,CAAC,qBAAqBtB,SAAS,CAACiB,IAAI,CAAC,CAAC,EAAE,CAAC;MAEvEE,OAAO,CAACC,GAAG,CAAC,kBAAkB,EAAEC,QAAQ,CAACE,IAAI,CAAC;MAC9ClB,cAAc,CAACgB,QAAQ,CAACE,IAAI,CAAC;MAE7B,IAAIF,QAAQ,CAACE,IAAI,CAACC,MAAM,KAAK,SAAS,EAAE;QACtCrB,mBAAmB,CAAC,aAAa,CAAC;QAClC,OAAO,IAAI;MACb,CAAC,MAAM;QACLA,mBAAmB,CAAC,qBAAqB,CAAC;;QAE1C;QACA,MAAMsB,YAAY,GAAGJ,QAAQ,CAACE,IAAI,CAACG,KAAK,CACrCC,MAAM,CAACC,CAAC,IAAIA,CAAC,CAACC,KAAK,CAAC,CACpBC,GAAG,CAACF,CAAC,IAAI,GAAGA,CAAC,CAACG,QAAQ,KAAKH,CAAC,CAACC,KAAK,EAAE,CAAC,CACrCG,IAAI,CAAC,IAAI,CAAC;QAEbd,KAAK,CACH,uCAAuC,GACvC,uBAAuB,GACvBO,YAAY,GAAG,MAAM,GACrB,0BAA0B,GAC1B,uDAAuD,GACvD,kCAAkC,GAAGzB,SAAS,GAAG,IAAI,GACrD,oDAAoD,GACpD,0CAA0C,GAAGA,SAAS,GAAG,SAAS,GAClE,gDAAgD,GAChD,qCACF,CAAC;QACD,OAAO,KAAK;MACd;IACF,CAAC,CAAC,OAAOiC,GAAG,EAAE;MACZd,OAAO,CAACU,KAAK,CAAC,0BAA0B,EAAEI,GAAG,CAAC;MAC9C9B,mBAAmB,CAAC,eAAe,CAAC;MAEpC,IAAI+B,QAAQ,GAAG,eAAe;MAC9B,IAAID,GAAG,CAACZ,QAAQ,EAAE;QAAA,IAAAc,kBAAA;QAChBD,QAAQ,GAAG,EAAAC,kBAAA,GAAAF,GAAG,CAACZ,QAAQ,CAACE,IAAI,cAAAY,kBAAA,uBAAjBA,kBAAA,CAAmBC,MAAM,KAAIH,GAAG,CAACZ,QAAQ,CAACgB,UAAU;MACjE,CAAC,MAAM,IAAIJ,GAAG,CAACK,OAAO,EAAE;QACtBJ,QAAQ,GAAG,8CAA8C;MAC3D,CAAC,MAAM;QACLA,QAAQ,GAAGD,GAAG,CAACM,OAAO;MACxB;MAEArB,KAAK,CACH,+BAA+B,GAC/B,SAAS,GAAGgB,QAAQ,GAAG,MAAM,GAC7B,iBAAiB,GACjB,6CAA6C,GAC7C,wCAAwC,GACxC,wCAAwC,GACxC,yDACF,CAAC;MACD,OAAO,KAAK;IACd,CAAC,SAAS;MACRrB,YAAY,CAAC,KAAK,CAAC;IACrB;EACF,CAAC;;EAED;EACA,MAAM2B,WAAW,GAAG,MAAAA,CAAA,KAAY;IAC9B,MAAMC,SAAS,GAAG,MAAMzB,cAAc,CAAC,CAAC;IACxC,IAAIyB,SAAS,EAAE;MACbhD,SAAS,CAAC,IAAI,CAAC;MACfsB,aAAa,CAAC,CAAC,CAAC;MAChBI,OAAO,CAACC,GAAG,CAAC,8CAA8C,CAAC;IAC7D;EACF,CAAC;;EAED;EACA,MAAMsB,UAAU,GAAGA,CAAA,KAAM;IACvBjD,SAAS,CAAC,KAAK,CAAC;IAChBU,mBAAmB,CAAC,EAAE,CAAC;IACvBE,cAAc,CAAC,IAAI,CAAC;IACpBsC,aAAa,CAAC,CAAC;IACfxB,OAAO,CAACC,GAAG,CAAC,mBAAmB,CAAC;EAClC,CAAC;;EAED;EACA,MAAMwB,cAAc,GAAGA,CAAA,KAAM;IAC3B,IAAI,CAACpD,MAAM,IAAI,CAACQ,SAAS,CAACiB,IAAI,CAAC,CAAC,EAAE;MAChCC,KAAK,CAAC,4BAA4B,CAAC;MACnC;IACF;IAEAvB,YAAY,CAAC,IAAI,CAAC;IAClBoB,aAAa,CAAC,CAAC,CAAC;IAChBI,OAAO,CAACC,GAAG,CAAC,+BAA+B,CAAC;;IAE5C;IACAd,WAAW,CAACuC,OAAO,GAAGC,WAAW,CAAC,MAAM;MACtCC,mBAAmB,CAAC,CAAC;IACvB,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC;EACZ,CAAC;;EAED;EACA,MAAMJ,aAAa,GAAGA,CAAA,KAAM;IAC1BhD,YAAY,CAAC,KAAK,CAAC;IACnB,IAAIW,WAAW,CAACuC,OAAO,EAAE;MACvBG,aAAa,CAAC1C,WAAW,CAACuC,OAAO,CAAC;MAClCvC,WAAW,CAACuC,OAAO,GAAG,IAAI;IAC5B;IACAhD,iBAAiB,CAAC,EAAE,CAAC;IACrBE,MAAM,CAAC,CAAC,CAAC;IACTgB,aAAa,CAAC,CAAC,CAAC;;IAEhB;IACA,IAAIxB,SAAS,CAACsD,OAAO,EAAE;MACrB,MAAMI,GAAG,GAAG1D,SAAS,CAACsD,OAAO,CAACK,UAAU,CAAC,IAAI,CAAC;MAC9CD,GAAG,CAACE,SAAS,CAAC,CAAC,EAAE,CAAC,EAAE5D,SAAS,CAACsD,OAAO,CAACO,KAAK,EAAE7D,SAAS,CAACsD,OAAO,CAACQ,MAAM,CAAC;IACxE;IACAlC,OAAO,CAACC,GAAG,CAAC,sBAAsB,CAAC;EACrC,CAAC;;EAED;EACA,MAAM2B,mBAAmB,GAAG,MAAAA,CAAA,KAAY;IACtC,IAAI,CAACxD,SAAS,CAACsD,OAAO,IAAI,CAAC7C,SAAS,CAACiB,IAAI,CAAC,CAAC,EAAE;IAE7C,IAAI;MACFE,OAAO,CAACC,GAAG,CAAC,4BAA4B,EAAEpB,SAAS,CAACiB,IAAI,CAAC,CAAC,CAAC;;MAE3D;MACA,MAAMqC,QAAQ,GAAG,sBAAsBtD,SAAS,CAACiB,IAAI,CAAC,CAAC,EAAE;MACzD,MAAMsC,aAAa,GAAG,MAAMvE,GAAG,CAACsC,GAAG,CAACgC,QAAQ,EAAE;QAC5CE,YAAY,EAAE,MAAM;QACpBC,OAAO,EAAE,KAAK,CAAC;MACjB,CAAC,CAAC;MAEFtC,OAAO,CAACC,GAAG,CAAC,wBAAwB,EAAEmC,aAAa,CAAChC,IAAI,CAACmC,IAAI,EAAE,OAAO,CAAC;;MAEvE;MACA3C,aAAa,CAAC,CAAC,CAAC;;MAEhB;MACA,MAAM4C,IAAI,GAAG,IAAIC,IAAI,CAAC,CAACL,aAAa,CAAChC,IAAI,CAAC,EAAE,WAAW,EAAE;QAAEsC,IAAI,EAAE;MAAa,CAAC,CAAC;;MAEhF;MACA,MAAMC,QAAQ,GAAG,IAAIC,QAAQ,CAAC,CAAC;MAC/BD,QAAQ,CAACE,MAAM,CAAC,MAAM,EAAEL,IAAI,CAAC;MAE7BxC,OAAO,CAACC,GAAG,CAAC,mCAAmC,CAAC;MAEhD,MAAMC,QAAQ,GAAG,MAAMrC,GAAG,CAACiF,IAAI,CAAC,SAAS,EAAEH,QAAQ,EAAE;QACnDI,OAAO,EAAE;UAAE,cAAc,EAAE;QAAsB,CAAC;QAClDC,MAAM,EAAE;UAAEC,YAAY,EAAE;QAAM,CAAC;QAC/BX,OAAO,EAAE,KAAK,CAAC;MACjB,CAAC,CAAC;MAEFtC,OAAO,CAACC,GAAG,CAAC,+BAA+B,EAAEC,QAAQ,CAACE,IAAI,CAAC8C,MAAM,CAAC;;MAElE;MACA,IAAIhD,QAAQ,CAACE,IAAI,CAAC8C,MAAM,IAAIhD,QAAQ,CAACE,IAAI,CAAC8C,MAAM,CAACC,MAAM,GAAG,CAAC,EAAE;QAC3DzE,iBAAiB,CAACwB,QAAQ,CAACE,IAAI,CAAC8C,MAAM,CAAC;MACzC,CAAC,MAAM;QACLxE,iBAAiB,CAAC,EAAE,CAAC;MACvB;;MAEA;MACA,IAAIwB,QAAQ,CAACE,IAAI,CAACgD,KAAK,IAAIhF,SAAS,CAACsD,OAAO,EAAE;QAC5C,MAAM2B,MAAM,GAAGjF,SAAS,CAACsD,OAAO;QAChC,MAAM4B,OAAO,GAAGD,MAAM,CAACtB,UAAU,CAAC,IAAI,CAAC;QAEvC,MAAMwB,GAAG,GAAG,IAAIC,KAAK,CAAC,CAAC;QACvBD,GAAG,CAACE,MAAM,GAAG,MAAM;UACjB;UACAJ,MAAM,CAACpB,KAAK,GAAGsB,GAAG,CAACtB,KAAK;UACxBoB,MAAM,CAACnB,MAAM,GAAGqB,GAAG,CAACrB,MAAM;;UAE1B;UACAoB,OAAO,CAACtB,SAAS,CAAC,CAAC,EAAE,CAAC,EAAEqB,MAAM,CAACpB,KAAK,EAAEoB,MAAM,CAACnB,MAAM,CAAC;UACpDoB,OAAO,CAACI,SAAS,CAACH,GAAG,EAAE,CAAC,EAAE,CAAC,EAAEF,MAAM,CAACpB,KAAK,EAAEoB,MAAM,CAACnB,MAAM,CAAC;;UAEzD;UACAyB,SAAS,CAAC,CAAC;QACb,CAAC;QACDJ,GAAG,CAACK,OAAO,GAAIC,CAAC,IAAK;UACnB7D,OAAO,CAACU,KAAK,CAAC,kCAAkC,EAAEmD,CAAC,CAAC;QACtD,CAAC;QACDN,GAAG,CAACO,GAAG,GAAG,0BAA0B5D,QAAQ,CAACE,IAAI,CAACgD,KAAK,EAAE;MAC3D;IAEF,CAAC,CAAC,OAAO1C,KAAK,EAAE;MAAA,IAAAqD,eAAA,EAAAC,gBAAA;MACdhE,OAAO,CAACU,KAAK,CAAC,gCAAgC,EAAEA,KAAK,CAAC;MAEtDd,aAAa,CAACqE,IAAI,IAAIA,IAAI,GAAG,CAAC,CAAC;;MAE/B;MACA,IAAIvD,KAAK,CAACwD,IAAI,KAAK,cAAc,IAAIxD,KAAK,CAACU,OAAO,CAAC+C,QAAQ,CAAC,SAAS,CAAC,EAAE;QACtEnE,OAAO,CAACoE,IAAI,CAAC,kDAAkD,CAAC;MAClE,CAAC,MAAM,IAAI,EAAAL,eAAA,GAAArD,KAAK,CAACR,QAAQ,cAAA6D,eAAA,uBAAdA,eAAA,CAAgB1D,MAAM,MAAK,GAAG,EAAE;QACzCL,OAAO,CAACU,KAAK,CAAC,iCAAiC,CAAC;QAChD1B,mBAAmB,CAAC,oBAAoB,CAAC;MAC3C,CAAC,MAAM,IAAI,EAAAgF,gBAAA,GAAAtD,KAAK,CAACR,QAAQ,cAAA8D,gBAAA,uBAAdA,gBAAA,CAAgB3D,MAAM,MAAK,GAAG,EAAE;QACzCL,OAAO,CAACU,KAAK,CAAC,yBAAyB,CAAC;QACxCX,KAAK,CAAC,sCAAsC,CAAC;QAC7CyB,aAAa,CAAC,CAAC;QACf;MACF;;MAEA;MACA,IAAI7B,UAAU,IAAI,CAAC,EAAE;QACnBK,OAAO,CAACU,KAAK,CAAC,uCAAuC,CAAC;QACtDX,KAAK,CAAC,2EAA2E,CAAC;QAClFyB,aAAa,CAAC,CAAC;MACjB;IACF;EACF,CAAC;;EAED;EACA,MAAMmC,SAAS,GAAGA,CAAA,KAAM;IACtBvE,aAAa,CAACsC,OAAO,CAACrC,MAAM,EAAE;IAC9B,MAAMG,GAAG,GAAGD,IAAI,CAACC,GAAG,CAAC,CAAC;IACtB,MAAM6E,OAAO,GAAG7E,GAAG,GAAGJ,aAAa,CAACsC,OAAO,CAACpC,QAAQ;IAEpD,IAAI+E,OAAO,IAAI,IAAI,EAAE;MACnBzF,MAAM,CAACQ,aAAa,CAACsC,OAAO,CAACrC,MAAM,CAAC;MACpCD,aAAa,CAACsC,OAAO,CAACrC,MAAM,GAAG,CAAC;MAChCD,aAAa,CAACsC,OAAO,CAACpC,QAAQ,GAAGE,GAAG;IACtC;EACF,CAAC;;EAED;EACA5B,SAAS,CAAC,MAAM;IACd,OAAO,MAAM;MACX2D,UAAU,CAAC,CAAC;IACd,CAAC;EACH,CAAC,EAAE,EAAE,CAAC;EAEN,oBACExD,OAAA;IAAKuG,SAAS,EAAC,uBAAuB;IAAAC,QAAA,gBACpCxG,OAAA;MAAAwG,QAAA,EAAI;IAAoC;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAI,CAAC,EAG5C,CAACtG,MAAM,iBACNN,OAAA;MAAKuG,SAAS,EAAC,iBAAiB;MAAAC,QAAA,eAE9BxG,OAAA;QAAKuG,SAAS,EAAC,kBAAkB;QAAAC,QAAA,gBAC/BxG,OAAA;UAAO6G,OAAO,EAAC,UAAU;UAAAL,QAAA,EAAC;QAA2B;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAO,CAAC,eAC7D5G,OAAA;UACE8G,EAAE,EAAC,UAAU;UACbnC,IAAI,EAAC,MAAM;UACX4B,SAAS,EAAC,UAAU;UACpBQ,WAAW,EAAC,wBAAwB;UACpCC,KAAK,EAAElG,SAAU;UACjBmG,QAAQ,EAAGnB,CAAC,IAAK/E,YAAY,CAAC+E,CAAC,CAACoB,MAAM,CAACF,KAAK,CAAE;UAC9CG,UAAU,EAAGrB,CAAC,IAAK;YACjB,IAAIA,CAAC,CAACsB,GAAG,KAAK,OAAO,IAAI,CAAC1F,SAAS,EAAE;cACnC4B,WAAW,CAAC,CAAC;YACf;UACF,CAAE;UACF+D,QAAQ,EAAE3F;QAAU;UAAA+E,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACrB,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAEC;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CACN,EAGA5F,gBAAgB,iBACfhB,OAAA;MAAKuG,SAAS,EAAE,qBACdvF,gBAAgB,CAACoF,QAAQ,CAAC,GAAG,CAAC,GAAG,SAAS,GAC1CpF,gBAAgB,CAACoF,QAAQ,CAAC,GAAG,CAAC,GAAG,OAAO,GACxC,SAAS,EACR;MAAAI,QAAA,eACDxG,OAAA;QAAAwG,QAAA,EAAIxF;MAAgB;QAAAyF,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACtB,CACN,EAGA1F,WAAW,iBACVlB,OAAA;MAAKuG,SAAS,EAAC,mBAAmB;MAAAC,QAAA,gBAChCxG,OAAA;QAAAwG,QAAA,EAAI;MAA0B;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC,eACnC5G,OAAA;QAAKuG,SAAS,EAAC,qBAAqB;QAAAC,QAAA,gBAClCxG,OAAA;UAAAwG,QAAA,gBAAGxG,OAAA;YAAAwG,QAAA,EAAQ;UAAW;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ,CAAC,KAAC,EAAC1F,WAAW,CAACoG,EAAE,EAAC,OAAK;QAAA;UAAAb,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAG,CAAC,EACxD1F,WAAW,CAACsB,KAAK,IAAItB,WAAW,CAACsB,KAAK,CAACI,GAAG,CAAC,CAAC2E,IAAI,EAAEC,GAAG,kBACpDxH,OAAA;UAAeuG,SAAS,EAAE,mBAAmBgB,IAAI,CAACE,OAAO,GAAG,SAAS,GAAG,OAAO,EAAG;UAAAjB,QAAA,gBAChFxG,OAAA;YAAAwG,QAAA,GAASe,IAAI,CAAC1E,QAAQ,EAAC,GAAC;UAAA;YAAA4D,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ,CAAC,KAAC,EAChCW,IAAI,CAACE,OAAO,GACR,cAAcF,IAAI,CAAC/C,IAAI,SAAS,GAChC,KAAK+C,IAAI,CAAC5E,KAAK,IAAI,QAAQ,EAAE;QAAA,GAJ3B6E,GAAG;UAAAf,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAMR,CACN,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACC,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CACN,eAGD5G,OAAA;MAAKuG,SAAS,EAAC,gBAAgB;MAAAC,QAAA,EAC5BlG,MAAM,gBACLN,OAAA;QAAKuG,SAAS,EAAC,iBAAiB;QAAAC,QAAA,gBAE9BxG,OAAA;UACE0H,GAAG,EAAErH,SAAU;UACfkG,SAAS,EAAC;QAAkB;UAAAE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC7B,CAAC,EACD,CAACpG,SAAS,iBACTR,OAAA;UAAKuG,SAAS,EAAC,gBAAgB;UAAAC,QAAA,eAC7BxG,OAAA;YAAAwG,QAAA,EAAG;UAA6C;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAG;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACjD,CACN,EACApG,SAAS,IAAIoB,UAAU,GAAG,CAAC,iBAC1B5B,OAAA;UAAKuG,SAAS,EAAC,iBAAiB;UAAAC,QAAA,GAAC,kCACT,EAAC5E,UAAU,EAAC,UACpC;QAAA;UAAA6E,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAK,CACN;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACE,CAAC,gBAEN5G,OAAA;QAAKuG,SAAS,EAAC,oBAAoB;QAAAC,QAAA,gBACjCxG,OAAA;UAAKuG,SAAS,EAAC,kBAAkB;UAAAC,QAAA,EAAC;QAAE;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAK,CAAC,eAC1C5G,OAAA;UAAAwG,QAAA,EAAG;QAA+C;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAG,CAAC,eACtD5G,OAAA;UAAAwG,QAAA,EAAO;QAAgD;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAO,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAC5D;IACN;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACE,CAAC,EAGLtG,MAAM,iBACLN,OAAA;MAAKuG,SAAS,EAAC,iBAAiB;MAAAC,QAAA,gBAC9BxG,OAAA;QAAKuG,SAAS,EAAC,WAAW;QAAAC,QAAA,gBACxBxG,OAAA;UAAMuG,SAAS,EAAC,YAAY;UAAAC,QAAA,EAAC;QAAO;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAM,CAAC,eAC3C5G,OAAA;UAAMuG,SAAS,EAAE,cAAc/F,SAAS,GAAG,QAAQ,GAAG,EAAE,EAAG;UAAAgG,QAAA,EACxDhG,SAAS,GAAG,cAAc,GAAG;QAAW;UAAAiG,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACrC,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACJ,CAAC,eACN5G,OAAA;QAAKuG,SAAS,EAAC,WAAW;QAAAC,QAAA,gBACxBxG,OAAA;UAAMuG,SAAS,EAAC,YAAY;UAAAC,QAAA,EAAC;QAAI;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAM,CAAC,eACxC5G,OAAA;UAAMuG,SAAS,EAAC,YAAY;UAAAC,QAAA,EAAE5F;QAAG;UAAA6F,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAO,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACtC,CAAC,eACN5G,OAAA;QAAKuG,SAAS,EAAC,WAAW;QAAAC,QAAA,gBACxBxG,OAAA;UAAMuG,SAAS,EAAC,YAAY;UAAAC,QAAA,EAAC;QAAc;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAM,CAAC,eAClD5G,OAAA;UAAMuG,SAAS,EAAC,YAAY;UAAAC,QAAA,EAAE9F,cAAc,CAAC0E;QAAM;UAAAqB,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAO,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACxD,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CACN,EAGAlG,cAAc,CAAC0E,MAAM,GAAG,CAAC,iBACxBpF,OAAA;MAAKuG,SAAS,EAAC,kBAAkB;MAAAC,QAAA,gBAC/BxG,OAAA;QAAAwG,QAAA,EAAI;MAAoB;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC,eAC7B5G,OAAA;QAAKuG,SAAS,EAAC,kBAAkB;QAAAC,QAAA,EAC9B,CAAC,GAAG,IAAImB,GAAG,CAACjH,cAAc,CAAC,CAAC,CAACkC,GAAG,CAAC,CAACgF,KAAK,EAAEC,KAAK,kBAC7C7H,OAAA;UAAkBuG,SAAS,EAAC,aAAa;UAAAC,QAAA,EACtCoB;QAAK,GADGC,KAAK;UAAApB,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAEV,CACP;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACC,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CACN,eAGD5G,OAAA;MAAKuG,SAAS,EAAC,UAAU;MAAAC,QAAA,EACtB,CAAClG,MAAM,gBACNN,OAAA;QACEuG,SAAS,EAAC,iBAAiB;QAC3BuB,OAAO,EAAExE,WAAY;QACrB+D,QAAQ,EAAE3F,SAAU;QAAA8E,QAAA,EAEnB9E,SAAS,GAAG,yBAAyB,GAAG;MAAiB;QAAA+E,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACpD,CAAC,gBAET5G,OAAA,CAAAE,SAAA;QAAAsG,QAAA,GACG,CAAChG,SAAS,gBACTR,OAAA;UAAQuG,SAAS,EAAC,iBAAiB;UAACuB,OAAO,EAAEpE,cAAe;UAAA8C,QAAA,EAAC;QAE7D;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC,gBAET5G,OAAA;UAAQuG,SAAS,EAAC,iBAAiB;UAACuB,OAAO,EAAErE,aAAc;UAAA+C,QAAA,EAAC;QAE5D;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CACT,eACD5G,OAAA;UAAQuG,SAAS,EAAC,gBAAgB;UAACuB,OAAO,EAAEtE,UAAW;UAAAgD,QAAA,EAAC;QAExD;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC;MAAA,eACT;IACH;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACE,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAEH,CAAC;AAEV;AAACxG,EAAA,CAxZQD,UAAU;AAAA4H,EAAA,GAAV5H,UAAU;AA0ZnB,eAAeA,UAAU;AAAC,IAAA4H,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}